/**
 * @copyright Copyright (c) 2019 Lauro Moraes - [https://github.com/subversivo58]
 * @license The MIT License (MIT)             - [https://github.com/subversivo58/emoji-extractor/blob/master/LICENSE]
 * @version 0.1.0 [development stage]         - [https://github.com/subversivo58/emoji-extractor/blob/master/VERSIONING.md]
 */((a,b)=>{"function"==typeof define&&define.amd?define(["exports"],b):"undefined"==typeof exports?b(a):b(exports)})(this,a=>{'use strict';let b,c,d=!!("WorkerGlobalScope"in self&&"ServiceWorkerGlobalScope"in self),e=!(!("WorkerGlobalScope"in self)||"ServiceWorkerGlobalScope"in self),f=!(!("window"in self)||!("document"in self)||d||e),g=!1,h=Date.now();const i={Extend(...a){try{return Object.assign(...a)}catch(a){return{}}},isObject(a){return"object"==typeof a},isArray(a){return Array.isArray(a)}};let j=a=>{let b=Object.getOwnPropertyNames(a);return b.forEach(b=>{let c=a[b];"object"==typeof c&&null!==c&&j(c)}),Object.freeze(a)},k=function(a){if(!this instanceof k)throw new Error("Plugin isn't initialized! This call is not instance of Plugin!");else if(g)throw new Error("Plugin already initialized! Only accept one instance of Plugin!");else if(!a||a!==h)g=!0;else return j(this)};const l=new k(h);if(d);else if(e);else if(f)k.prototype.save=()=>{if(!b)throw new Error(`Emoji "data" isn't not setup!`);/\./.test(c.filename)||(c.filename=/12/.test(c.url)?"emoji-v12.json":"emoji-v11.json");let d,e=c.filename.split("."),f=e.length-1,g="js",h="application/javascript; charset=UTF-8";switch(e[f]){case"js":d=c.minify?`let data=${JSON.stringify(b)}`:`let data = ${JSON.stringify(b,null,4)}`;break;case"mjs":d=c.minify?`let data=${JSON.stringify(b)};export default data`:`let data = ${JSON.stringify(b,null,4)};\nexport default data`,g="mjs";break;case"json":default:d=c.minify?JSON.stringify(b):JSON.stringify(b,null,4),g+="on",h="application/json; charset=UTF-8";}let i=document.createElement("a");i.href=`data:${h},${encodeURIComponent(d)}`,i.download="mjs"!==e[f]&&"js"!==e[f]&&"json"!==e[f]?/12/.test(c.url)?`emoji-v12.${g}`:`emoji.${g}`:c.filename,i.hidden=!0,document.body.appendChild(i),i.addEventListener("click",()=>{i.parentNode.removeChild(i)},{once:!0}),i.click()},k.prototype.extractor=a=>new Promise((d,e)=>{a=i.isObject(a)&&!i.isArray(a)?a:{};let f=i.Extend({},{url:"https://cors-anywhere.herokuapp.com/https://unicode.org/Public/emoji/12.0/emoji-test.txt",minify:!1,onlyicon:!1,filename:!1,ignore:["yawning face","brown heart","white heart","pinching hand","mechanical arm","mechanical leg","ear with hearing aid","deaf person","deaf man","deaf woman","person standing","man standing","woman standing","person kneeling","man kneeling","woman kneeling","man with probing cane","woman with probing cane","man in motorized wheelchair","woman in motorized wheelchair","man in manual wheelchair","woman in manual wheelchair","orangutan","guide dog","service dog","sloth","otter","skunk","flamingo","garlic","onion","waffle","falafel","butter","oyster","beverage box","mate","ice cube","hindu temple","manual wheelchair","motorized wheelchair","auto rickshaw","parachute","ringed planet","diving mask","yo-yo","kite","safety vest","sari","one-piece swimsuit","swim brief","shorts","ballet shoes","banjo","diya lamp","axe","probing cane","drop of blood","adhesive bandage","stethoscope","chair","razor","orange circle","yellow circle","green circle","purple circle","brown circle","red square","orange square","yellow square","green square","blue square","purple square","brown square"],tones:!0},a);c=f,fetch(f.url).then(a=>a.text()).then(a=>{let c,e={},g=!1,h=!1,i=!1,j="",k=!1,m=!1,n=!0;a.toString().split("\n").forEach((a,o,p)=>{let q=a.length;if(!(/1F3F(B|C|D|E|F)                                      ;/.test(a)||/# subgroup: skin-tone/.test(a))){if(/# group:/.test(a)){if(/# group: Component/.test(a))return;g&&(g=!1,k=!0);let b=a.replace(/# group: /,"");"Smileys & People"===b?(e.people=[],c="people"):"Smileys & Emotion"===b?(e.smiles=[],c="smiles"):"People & Body"===b?(e.people=[],c="people"):"Animals & Nature"===b?(e.nature=[],c="nature"):"Food & Drink"===b?(e.food=[],c="food"):"Travel & Places"===b?(e.travel=[],c="travel"):"Activities"===b?(e.activity=[],c="activity"):"Objects"===b?(e.objects=[],c="objects"):"Symbols"===b?(e.symbols=[],c="symbols"):"Flags"===b?(e.flags=[],c="flags"):void 0,g=!0}if(/# subgroup:/.test(a)&&(n?n=!1:m=!0),/; fully-qualified/.test(a)){a=a.substr(67,q);let b=a.split(/\s/),d=b[0],g=b.slice(1,b.length).join(" ");for(let b,c=0;c<f.ignore.length;c++)if(b=new RegExp(f.ignore[c]),b.test(a))return;if(!f.tones&&/[:]/.test(g)&&!/keycap:/.test(g)&&!/flag:/.test(g))return;/flag: /.test(g)&&(g=g.replace("flag: ",""));const l=()=>!(!/[:]/.test(g)||/keycap:/.test(g)||/flag:/.test(g))&&(h=!0,!0);let n=()=>e[c].length-1,o=(a,b=!1)=>{b?e[c][a][2].push(d):(e[c].push([d]),e[c][n()].push(g))};if(h){let a=new RegExp("^"+g.split(":")[0]+":");a.test(j)?o(n(),!0):(o(),h=!1,i=!0)}else l()?(e[c][n()].push([d]),i=!1):i?m?(k?(o(),k=!1):o(),m=!1):o():(o(),i=!0);j=g}o===p.length-1&&(f.onlyicon?Object.keys(e).forEach((a,c,g)=>{let h=[];for(let b=0;b<e[a].length;b++)f.tones&&e[a][b][2]?h.push([e[a][b][0],e[a][b][2]]):h.push(e[a][b][0]);e[a]=h,c===g.length-1&&(b=e,d({data:b,save:l.save}))}):(b=e,d({data:b,save:l.save})))}})}).catch(e)});else throw new Error("Context unidentified ... please, this plugin running only Web Workers, Service Worker or Browser (window top)");a.EmojiExtractor=j(new k().extractor)});
